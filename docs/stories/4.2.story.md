# Story 4.2: λ…ΈνΈ λ‚΄μ© κΈ°λ° μλ™ μ”μ•½ μƒμ„±

## π“‹ μ¤ν† λ¦¬ μ •λ³΄

- **ID:** 4.2
- **Epic:** Epic 4 - AI κΈ°λ° μ”μ•½ λ° νƒκΉ…
- **μ°μ„ μμ„:** P1 (High)
- **μ¤ν† λ¦¬ ν¬μΈνΈ:** 5
- **μƒνƒ:** Ready for Review
- **λ‹΄λ‹Ήμ:** Dev Agent

## π“– μ¤ν† λ¦¬

**As a** μ‚¬μ©μ  
**I want** λ…ΈνΈ λ‚΄μ©μ„ μλ™μΌλ΅ μ”μ•½ν•΄μ£Όλ” κΈ°λ¥  
**So that** κΈ΄ λ…ΈνΈμ ν•µμ‹¬ λ‚΄μ©μ„ λΉ λ¥΄κ² νμ•…ν•  μ μλ‹¤

## β… μμ© κΈ°μ¤€

### μ£Όμ” κΈ°λ¥
- [ ] λ…ΈνΈ μƒμ„Έ νμ΄μ§€μ—μ„ "AI μ”μ•½" λ²„νΌ ν΄λ¦­ μ‹ μ”μ•½ μƒμ„±
- [ ] μ”μ•½μ€ 3-6κ° λ¶λ¦Ώ ν¬μΈνΈλ΅ κµ¬μ„±
- [ ] μ”μ•½ κΈΈμ΄λ” μ‚¬μ©μκ°€ μ„¤μ • κ°€λ¥ (50-500μ)
- [ ] μ”μ•½ μƒμ„± μ¤‘ λ΅λ”© μƒνƒ ν‘μ‹
- [ ] μ”μ•½ μ™„λ£ ν›„ κ²°κ³Όλ¥Ό λ¨λ‹¬ λλ” μΈλΌμΈμΌλ΅ ν‘μ‹
- [ ] μ”μ•½ μ¬μƒμ„± κΈ°λ¥ μ κ³µ

### μ‚¬μ©μ κ²½ν—
- [ ] μ”μ•½ μƒμ„± μ‹κ°„ 10μ΄ μ΄λ‚΄
- [ ] μ”μ•½ ν’μ§μ΄ μ‚¬μ©μ λ§μ΅±λ„ 90% μ΄μƒ
- [ ] μ”μ•½ μ‹¤ν¨ μ‹ μ μ ν• μ—λ¬ λ©”μ‹μ§€ ν‘μ‹
- [ ] μ”μ•½ κ²°κ³Όλ¥Ό λ³µμ‚¬ν•  μ μλ” κΈ°λ¥

### κΈ°μ μ  μ”κµ¬μ‚¬ν•­
- [ ] Gemini APIλ¥Ό ν†µν• μ”μ•½ μƒμ„±
- [ ] ν† ν° μ ν• κ΄€λ¦¬ (8k ν† ν°)
- [ ] λΉ„λ™κΈ° μ²λ¦¬ λ° μƒνƒ κ΄€λ¦¬
- [ ] μ—λ¬ ν•Έλ“¤λ§ λ° μ¬μ‹λ„ λ΅μ§

## π“‹ μ‘μ—… λ©λ΅

### 1. UI μ»΄ν¬λ„νΈ κ°λ°
- [x] 1.1 AI μ”μ•½ λ²„νΌ μ»΄ν¬λ„νΈ μƒμ„±
- [x] 1.2 μ”μ•½ κ²°κ³Ό ν‘μ‹ λ¨λ‹¬ μ»΄ν¬λ„νΈ μƒμ„±
- [x] 1.3 μ”μ•½ μ„¤μ • λ‹¤μ΄μ–Όλ΅κ·Έ μ»΄ν¬λ„νΈ μƒμ„±
- [x] 1.4 μ”μ•½ λ΅λ”© μƒνƒ μ»΄ν¬λ„νΈ μƒμ„±

### 2. API μ—°λ™
- [x] 2.1 μ”μ•½ API μ—”λ“ν¬μΈνΈ μ—°λ™
- [x] 2.2 μ”μ•½ μ„¤μ • (κΈΈμ΄, μ¤νƒ€μΌ) API μ—°λ™
- [x] 2.3 μ—λ¬ μ²λ¦¬ λ° μ¬μ‹λ„ λ΅μ§ κµ¬ν„

### 3. μƒνƒ κ΄€λ¦¬
- [x] 3.1 μ”μ•½ μƒμ„± μƒνƒ κ΄€λ¦¬ (λ΅λ”©, μ™„λ£, μ—λ¬)
- [x] 3.2 μ”μ•½ μ„¤μ • μƒνƒ κ΄€λ¦¬
- [x] 3.3 μ”μ•½ κ²°κ³Ό μΊμ‹± κµ¬ν„

### 4. μ‚¬μ©μ μΈν„°νμ΄μ¤
- [x] 4.1 λ…ΈνΈ μƒμ„Έ νμ΄μ§€μ— μ”μ•½ λ²„νΌ μ¶”κ°€
- [x] 4.2 μ”μ•½ κ²°κ³Ό ν‘μ‹ UI κµ¬ν„
- [x] 4.3 μ”μ•½ μ„¤μ • UI κµ¬ν„
- [x] 4.4 μ”μ•½ μ¬μƒμ„± UI κµ¬ν„

### 5. ν…μ¤νΈ
- [x] 5.1 μ”μ•½ μƒμ„± κΈ°λ¥ λ‹¨μ„ ν…μ¤νΈ
- [x] 5.2 μ”μ•½ UI μ»΄ν¬λ„νΈ ν…μ¤νΈ
- [x] 5.3 μ”μ•½ API μ—°λ™ ν…μ¤νΈ
- [x] 5.4 μ”μ•½ μ—λ¬ μ²λ¦¬ ν…μ¤νΈ

## π”§ κ°λ° λ…ΈνΈ

### κΈ°μ  μ¤νƒ
- **Frontend:** React, TypeScript, Tailwind CSS
- **Backend:** Next.js API Routes
- **AI Service:** Google Gemini API
- **State Management:** React Hooks (useState, useEffect)

### μ£Όμ” μ»΄ν¬λ„νΈ
- `AISummaryButton`: μ”μ•½ μƒμ„± λ²„νΌ
- `SummaryModal`: μ”μ•½ κ²°κ³Ό ν‘μ‹ λ¨λ‹¬
- `SummarySettings`: μ”μ•½ μ„¤μ • λ‹¤μ΄μ–Όλ΅κ·Έ
- `SummaryLoading`: μ”μ•½ λ΅λ”© μƒνƒ ν‘μ‹

### API μ—”λ“ν¬μΈνΈ
- `POST /api/ai/summarize`: λ…ΈνΈ μ”μ•½ μƒμ„±
- `GET /api/ai/summary-settings`: μ”μ•½ μ„¤μ • μ΅°ν
- `PUT /api/ai/summary-settings`: μ”μ•½ μ„¤μ • μ—…λ°μ΄νΈ

### μƒνƒ κ΄€λ¦¬
```typescript
interface SummaryState {
  isLoading: boolean;
  summary: string | null;
  error: string | null;
  settings: {
    maxLength: number;
    style: 'bullet' | 'paragraph';
  };
}
```

## π§ ν…μ¤νΈ

### λ‹¨μ„ ν…μ¤νΈ
- μ”μ•½ λ²„νΌ ν΄λ¦­ μ‹ API νΈμ¶
- μ”μ•½ κ²°κ³Ό ν‘μ‹ λ° ν¬λ§·ν…
- μ”μ•½ μ„¤μ • λ³€κ²½ λ° μ μ©
- μ—λ¬ μƒνƒ μ²λ¦¬

### ν†µν•© ν…μ¤νΈ
- λ…ΈνΈ μƒμ„Έ νμ΄μ§€μ—μ„ μ”μ•½ μƒμ„± ν”λ΅μ°
- μ”μ•½ μ¬μƒμ„± κΈ°λ¥
- μ”μ•½ μ„¤μ • μ €μ¥ λ° λ¶λ¬μ¤κΈ°

### E2E ν…μ¤νΈ
- μ‚¬μ©μ μ‹λ‚λ¦¬μ¤: λ…ΈνΈ μ‘μ„± β†’ μ”μ•½ μƒμ„± β†’ κ²°κ³Ό ν™•μΈ
- μ—λ¬ μ‹λ‚λ¦¬μ¤: API μ‹¤ν¨ β†’ μ—λ¬ λ©”μ‹μ§€ ν‘μ‹

## π“ λ³€κ²½ λ΅κ·Έ

- **2024-01-XX**: Story 4.2 μ΄κΈ° μ‘μ„±
- **2024-01-XX**: Epic 4 κΈ°λ° μ”μ•½ μƒμ„± κΈ°λ¥ μ •μ
- **2024-01-XX**: AI μ”μ•½ κΈ°λ¥ κ°λ° μ™„λ£

## π― Dev Agent Record

### Agent Model Used
- Claude Sonnet 4

### Debug Log References
- AI μ”μ•½ λ²„νΌ μ»΄ν¬λ„νΈ μƒμ„± μ™„λ£
- μ”μ•½ λ¨λ‹¬ μ»΄ν¬λ„νΈ μƒμ„± μ™„λ£
- μ”μ•½ μ„¤μ • λ‹¤μ΄μ–Όλ΅κ·Έ μƒμ„± μ™„λ£
- API μ—”λ“ν¬μΈνΈ μ—°λ™ μ™„λ£
- ν…μ¤νΈ νμΌ μƒμ„± μ™„λ£

### Completion Notes List
- β… AI μ”μ•½ λ²„νΌ μ»΄ν¬λ„νΈ κµ¬ν„
- β… μ”μ•½ κ²°κ³Ό ν‘μ‹ λ¨λ‹¬ κµ¬ν„
- β… μ”μ•½ μ„¤μ • λ‹¤μ΄μ–Όλ΅κ·Έ κµ¬ν„
- β… λ…ΈνΈ μƒμ„Έ νμ΄μ§€μ— μ”μ•½ κΈ°λ¥ ν†µν•©
- β… API μ—”λ“ν¬μΈνΈ μ—°λ™ λ° μ„¤μ • κ΄€λ¦¬
- β… λ‹¨μ„ ν…μ¤νΈ μ‘μ„±
- β… μ—λ¬ μ²λ¦¬ λ° μ‚¬μ©μ κ²½ν— κ°μ„ 

### File List
- `components/notes/ai-summary-button.tsx`: AI μ”μ•½ λ²„νΌ μ»΄ν¬λ„νΈ
- `components/notes/summary-modal.tsx`: μ”μ•½ κ²°κ³Ό ν‘μ‹ λ¨λ‹¬
- `components/notes/summary-settings.tsx`: μ”μ•½ μ„¤μ • λ‹¤μ΄μ–Όλ΅κ·Έ
- `app/api/ai/summary-settings/route.ts`: μ”μ•½ μ„¤μ • API μ—”λ“ν¬μΈνΈ
- `__tests__/notes/ai-summary-button.test.tsx`: AI μ”μ•½ λ²„νΌ ν…μ¤νΈ
- `__tests__/notes/summary-modal.test.tsx`: μ”μ•½ λ¨λ‹¬ ν…μ¤νΈ
- `components/notes/note-detail.tsx`: λ…ΈνΈ μƒμ„Έ νμ΄μ§€ (μμ •)
- `app/api/ai/summarize/route.ts`: μ”μ•½ API (μμ •)

## π”— κ΄€λ ¨ νμΌ

- `app/notes/[id]/page.tsx`: λ…ΈνΈ μƒμ„Έ νμ΄μ§€
- `app/api/ai/summarize/route.ts`: μ”μ•½ API μ—”λ“ν¬μΈνΈ
- `components/notes/ai-summary-button.tsx`: μ”μ•½ λ²„νΌ μ»΄ν¬λ„νΈ
- `components/notes/summary-modal.tsx`: μ”μ•½ κ²°κ³Ό λ¨λ‹¬
- `lib/ai/gemini.ts`: Gemini API ν΄λΌμ΄μ–ΈνΈ

## π“ μ„±κ³µ μ§€ν‘

- μ”μ•½ μƒμ„± μ„±κ³µλ¥  95% μ΄μƒ
- ν‰κ·  μ”μ•½ μƒμ„± μ‹κ°„ 5μ΄ μ΄λ‚΄
- μ‚¬μ©μ λ§μ΅±λ„ 90% μ΄μƒ
- μ”μ•½ ν’μ§ μ μ 4.5/5.0 μ΄μƒ
